<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Pet Med App</title>
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/header.css"/>
    <link rel="stylesheet" href="/css/vet-home.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
</head>

<body>

<header th:insert="~{fragments/commons::nav}"></header>

<main>
    <div class="container">
        <div class="table-container">
            <p class="error" th:if="${vet.getClinic() == null}">You need to add a clinic info before you can offer appointments.Go to <a href="/users/profile">Edit profile</a></p>

            <div class="show-schedule">
                <input type="hidden" id="vet-username" th:value="${vet.username}">
                <h1 id="schedule-info"></h1>
                <table class="table">
                    <thead>
                    <tr>
                        <th>Start time</th>
                        <th>Pet name</th>
                        <th>Species</th>
                        <th>Reason</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody id="schedule-body">

                    </tbody>
                </table>

                <div id="popup" class="popup">
                    <div class="popup-content">
                        <h2>Enter Medical Record</h2>
                        <span class="error" id="empty-error">Please fill out both fields before saving.</span>
                        <span class="error" id="length-error">Diagnosis cannot exceed 100 characters</span>
                        <input type="text" id="diagnosis-input" placeholder="Enter diagnosis here...">
                        <textarea id="treatment-textarea" rows="6" cols="50" placeholder="Enter treatment here..."></textarea>
                        <button id="save-record">Save</button>
                        <button id="close-record">Close</button>
                    </div>
                </div>

                <div id="details-popup" class="popup">
                    <div class="popup-content details-content">
                        <h2>Appointments Details</h2>
                        <div class="pet-picture">
                            <img id="pet-image" src="" alt="">
                        </div>
                        <p><strong>Start time: </strong><span id="start-time"></span></p>
                        <p><strong>Pet name: </strong><span id="pet-name"></span></p>
                        <p><strong>Species: </strong><span id="pet-species"></span></p>
                        <p><strong>Breed: </strong><span id="pet-breed"></span></p>
                        <p><strong>Age: </strong><span id="pet-age"></span></p>
                        <p><strong>Owner: </strong><span id="pet-owner"></span></p>
                        <p><strong>Reason: </strong><span id="reason"></span></p>
                        <p><strong>Email: </strong><span id="email"></span></p>
                        <p><strong>Phone: </strong><span id="phone"></span></p>
                        <div class="details-buttons">
                            <button id="close-details">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="calendar-container">
            <div id="datepicker"></div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script th:src="@{/js/fetch-schedule.js}" type="text/javascript"></script>
</body>
</html>